(function(){"use strict";var root=typeof self=='object'&&self.self===self&&self||typeof global=='object'&&global.global===global&&global||this||{};root.json2html={'version':'1.4.0','transform':function(json,transform,_options){var out={'events':[],'html':''};var options={'events':false};options=_extend(options,_options);if(transform!==undefined||json!==undefined){var obj=typeof json==='string'?JSON.parse(json):json;out=_transform(obj,transform,options)}if(options.events)return(out);else return(out.html)},'toText':function(html){if(html===undefined||html===null)return("");return html.toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;').replace(/\'/g,'&#39;').replace(/\//g,'&#x2F;')}};if(typeof(window)==="object")if(window.jQuery){(function($){$.json2html=function(json,transform,_options){if(typeof json2html==='undefined')return(undefined);var options={'output':'json2html'};if(_options!==undefined)$.extend(options,_options);if(options.eventData){options.data=options.eventData;delete options.eventData}switch(options.output){case'json2html':options.events=true;return(json2html.transform(json,transform,options));break;case'html':options.events=false;return(json2html.transform(json,transform,options));break;case'jquery':options.events=false;var $result=_events(json2html.transform(json,transform,options));return($result);break}};$.fn.json2html=function(json,transform,_options){if(typeof json2html==='undefined')return(undefined);var options={'append':true,'replace':false,'prepend':false};if(_options!==undefined)$.extend(options,_options);if(options.eventData){options.data=options.eventData;delete options.eventData}options.events=true;return this.each(function(){var $result=_events(json2html.transform(json,transform,options));if(options.replace)$.fn.replaceWith.call($(this),$result);else if(options.prepend)$.fn.prepend.call($(this),$result);else $.fn.append.call($(this),$result)})};function _events(result){if(!result.events)return;var dom=$(document.createElement('i')).html(result.html);for(var i=0;i<result.events.length;i++){var event=result.events[i];var obj=$(dom).find("[json2html-event-id-"+event.type+"='"+event.id+"']");if(obj.length===0)throw'jquery.json2html was unable to attach event '+event.id+' to DOM';$(obj).removeAttr('json2html-event-id-'+event.type);$(obj).on(event.type,event.data,function(e){e.data.event=e;e.data.action.call($(this),e.data)})}return($(dom).children())}})(window.jQuery)}function _extend(obj1,obj2){var obj3={};for(var attrname in obj1){obj3[attrname]=obj1[attrname]}for(var attrname in obj2){obj3[attrname]=obj2[attrname]}return obj3}function _append(obj1,obj2){var out={'html':'','event':[]};if(typeof obj1!=='undefined'&&typeof obj2!=='undefined'){out.html=obj1.html+obj2.html;out.events=obj1.events.concat(obj2.events)}return(out)}function _isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]'}function _transform(json,transform,options){var elements={'events':[],'html':''};if(_isArray(json)){var len=json.length;for(var j=0;j<len;++j){elements=_append(elements,_apply(json[j],transform,j,options))}}else{switch(typeof json){case'undefined':case'function':default:elements=_append(elements,_apply(json,transform,undefined,options));break}}return(elements)}function _apply(obj,transform,index,options){var element={'events':[],'html':''};if(_isArray(transform)){var t_len=transform.length;for(var t=0;t<t_len;++t){element=_append(element,_apply(obj,transform[t],index,options))}}else if(typeof transform==='object'){var _element='<>';if(transform[_element]===undefined)_element='tag';if(transform[_element]!==undefined){var name=_getValue(obj,transform,_element,index,options);var isVoid=_isVoidElement(name);element.html+='<'+name;var children={'events':[],'html':''};var html;for(var key in transform){switch(key){case'tag':case'<>':break;case'text':if(isVoid)continue;var _transform=transform[key];if(!_isArray(_transform)){html=json2html.toText(_getValue(obj,transform,key,index,options))}break;case'children':case'html':if(isVoid)continue;var _transform=transform[key];if(_isArray(_transform)){children=_append(children,_apply(obj,_transform,index,options))}else if(typeof _transform==='function'){var temp=_transform.call(obj,obj,index,options.data);if(!_isArray(temp)){switch(typeof temp){case'object':if(temp.html!==undefined&&temp.events!==undefined)children=_append(children,temp);break;case'function':case'undefined':break;default:children.html+=temp;break}}}else{html=_getValue(obj,transform,key,index,options)}break;default:var isEvent=false;if(key.length>2)if(key.substring(0,2).toLowerCase()=='on'){if(options.events){var data={'action':transform[key],'obj':obj,'data':options.data,'index':index};var id=_guid();element.events[element.events.length]={'id':id,'type':key.substring(2),'data':data};element.html+=" json2html-event-id-"+key.substring(2)+"='"+id+"'"}isEvent=true}if(!isEvent){var val=_getValue(obj,transform,key,index,options);if(val!==undefined){var out;if(typeof val==='string')out='"'+val.replace(/"/g,'&quot;')+'"';else out=val;element.html+=' '+key+'='+out}}break}}if(!isVoid){element.html+='>';if(html)element.html+=html;element=_append(element,children);element.html+='</'+name+'>'}else{element.html+='/>'}}}return(element)}function _guid(){var S4=function(){return(((1+Math.random())*0x10000)|0).toString(16).substring(1)};return(S4()+S4()+"-"+S4()+S4()+"-"+S4()+S4())}function _getValue(obj,transform,key,index,options){var out='';var val=transform[key];switch(typeof val){case"function":switch(typeof obj){case'object':return(val.call(obj,obj,index,options.data));break;case'function':case'undefined':return('');break;default:var _obj={"value":obj,"index":index,"data":options.data};return(val.call(_obj,_obj,index,options.data));break}break;case"string":var tokenizer=new _tokenizer([/\$\{([^\}\{]+)\}/],function(src,real,re){return real?src.replace(re,function(all,name){var components=name.split('.');var useObj=obj;switch(typeof obj){case'object':var outVal='';var c_len=components.length;for(var i=0;i<c_len;++i){if(components[i].length>0){var newObj=useObj[components[i]];useObj=newObj;if(useObj===null||useObj===undefined)break}}if(useObj!==null&&useObj!==undefined)outVal=useObj;return(outVal);break;case'function':case'undefined':return('');break;default:switch(name){case'value':return(obj);break;case'index':return(index);break}break}}):src});out=tokenizer.parse(val).join('');break;default:out=val;break}return(out)}function _tokenizer(tokenizers,doBuild){if(!(this instanceof _tokenizer))return new _tokenizer(tokenizers,doBuild);this.tokenizers=tokenizers.splice?tokenizers:[tokenizers];if(doBuild)this.doBuild=doBuild;this.parse=function(src){this.src=src;this.ended=false;this.tokens=[];do{this.next()}while(!this.ended);return this.tokens};this.build=function(src,real){if(src)this.tokens.push(!this.doBuild?src:this.doBuild(src,real,this.tkn))};this.next=function(){var self=this,plain;self.findMin();plain=self.src.slice(0,self.min);self.build(plain,false);self.src=self.src.slice(self.min).replace(self.tkn,function(all){self.build(all,true);return''});if(!self.src)self.ended=true};this.findMin=function(){var self=this,i=0,tkn,idx;self.min=-1;self.tkn='';while((tkn=self.tokenizers[i++])!==undefined){idx=self.src[tkn.test?'search':'indexOf'](tkn);if(idx!=-1&&(self.min==-1||idx<self.min)){self.tkn=tkn;self.min=idx}}if(self.min==-1)self.min=self.src.length}}function _isVoidElement(element){switch(element){case"area":case"base":case"br":case"col":case"command":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return(true);break;default:return(false);break}}}());